{"ast":null,"code":"import _classCallCheck from\"/Users/joshuacolvin/Desktop/Development/meal-db/meal-db/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/joshuacolvin/Desktop/Development/meal-db/meal-db/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/joshuacolvin/Desktop/Development/meal-db/meal-db/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/joshuacolvin/Desktop/Development/meal-db/meal-db/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{connect}from'react-redux';import{filterName}from'../../../../app_state/action_creators/filterActions.jsx';import styles from'./index.module.css';import{PreviewCard}from'./previewCard.jsx';import{Button,Tag}from'../../../../static_components';var SearchMeal=/*#__PURE__*/function(_React$Component){_inherits(SearchMeal,_React$Component);var _super=_createSuper(SearchMeal);function SearchMeal(props){var _this;_classCallCheck(this,SearchMeal);_this=_super.call(this,props);_this.handleClick=function(event){var _this2=this;var keyCode=event.keyCode;// a == 65 && z == 90\nthis.inputRef.current.removeEventListener(\"onKeyUp\",function(e){return _this2.handleClick(e);});if(keyCode>=65&&keyCode<=90){var userData=event.target.value.toLowerCase();if(userData.length===1){fetch(\"https://www.themealdb.com/api/json/v1/1/search.php?f=\".concat(userData)).then(function(response){return response.json();}).then(function(data){return _this2.props.filterName(data);});}else{this.setState(function(){return{filteredMeals:_this2.state.filteredMeals.filter(function(meal){return meal.strMeal.toLowerCase().includes(userData);})};});}}else if(keyCode===8){var _userData=event.target.value.toLowerCase();if(_userData.length===0&&this.state.filteredMeals.length>0){this.setState(function(){return{meals:[],filteredMeals:[]};});}else if(_userData.length>0){this.setState(function(){return{filteredMeals:_this2.state.meals.filter(function(meal){return meal.strMeal.toLowerCase().includes(_userData);})};});}}this.inputRef.current.addEventListener(\"onKeyUp\",function(e){return _this2.handleClick(e);});};_this.state={meals:[],filteredMeals:[]};_this.inputRef=React.createRef();return _this;}_createClass(SearchMeal,[{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){var _this3=this;if(prevState.meals&&prevState.meals.length===0){this.setState(function(){return{meals:_this3.props.meals,filteredMeals:_this3.props.meals};});}}},{key:\"render\",value:function render(){var _this4=this;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"header\",{className:styles.searchMealHeader},/*#__PURE__*/React.createElement(Tag,{path:-1},\"Go Back\"),/*#__PURE__*/React.createElement(\"h2\",null,/*#__PURE__*/React.createElement(\"ins\",null,\"Search Meal\")),/*#__PURE__*/React.createElement(Button,{text:\"Home\",path:\"/Home\"})),/*#__PURE__*/React.createElement(\"input\",{ref:this.inputRef,type:\"text\",onKeyUp:function onKeyUp(e){return _this4.handleClick(e);}}),this.state.filteredMeals!==undefined&&this.state.filteredMeals.length!==0&&this.state.filteredMeals.map(function(meal,i){return/*#__PURE__*/React.createElement(PreviewCard,Object.assign({key:i},meal));}));}}]);return SearchMeal;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{meals:state.filterMealsReducer[0]};};export default connect(mapStateToProps,{filterName:filterName})(SearchMeal);","map":{"version":3,"sources":["/Users/joshuacolvin/Desktop/Development/meal-db/meal-db/src/router/components/meals/search_meal/index.jsx"],"names":["React","connect","filterName","styles","PreviewCard","Button","Tag","SearchMeal","props","handleClick","event","keyCode","inputRef","current","removeEventListener","e","userData","target","value","toLowerCase","length","fetch","then","response","json","data","setState","filteredMeals","state","filter","meal","strMeal","includes","meals","addEventListener","createRef","prevProps","prevState","searchMealHeader","undefined","map","i","Component","mapStateToProps","filterMealsReducer"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport { connect } from 'react-redux';\nimport { filterName } from '../../../../app_state/action_creators/filterActions.jsx';\n\nimport styles from './index.module.css';\n\nimport { PreviewCard } from './previewCard.jsx';\nimport { Button, Tag } from '../../../../static_components';\n\nclass SearchMeal extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tmeals: [],\n\t\t\tfilteredMeals: []\n\t\t}\n\t\tthis.inputRef = React.createRef();\n\t}\n\thandleClick = function(event) {\n\t\tlet keyCode = event.keyCode;\n\t\t// a == 65 && z == 90\n\t\tthis.inputRef.current.removeEventListener(\"onKeyUp\",(e) => this.handleClick(e));\n\t\tif ((keyCode >= 65) && (keyCode <= 90)) {\n\t\t\tlet userData = event.target.value.toLowerCase();\n\t\t\tif (userData.length === 1) {\n\t\t\t\tfetch(`https://www.themealdb.com/api/json/v1/1/search.php?f=${userData}`)\n\t\t\t\t\t.then(response => response.json())\n\t\t\t\t\t.then(data => this.props.filterName(data));\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.setState(() => ({\n\t\t\t\t\tfilteredMeals: this.state.filteredMeals.filter(meal => meal.strMeal.toLowerCase().includes(userData))\n\t\t\t\t}));\n\t\t\t}\t\n\t\t}\n\t\telse if (keyCode === 8) {\n\t\t\tlet userData = event.target.value.toLowerCase();\n\t\t\tif ((userData.length === 0) && (this.state.filteredMeals.length > 0)) {\n\t\t\t\tthis.setState(() => ({\n\t\t\t\t\tmeals: [],\n\t\t\t\t\tfilteredMeals: []\n\t\t\t\t}));\n\t\t\t}\n\t\t\telse if (userData.length > 0) {\n\t\t\t\tthis.setState(() => ({\n\t\t\t\t\tfilteredMeals: this.state.meals.filter(meal => meal.strMeal.toLowerCase().includes(userData))\n\t\t\t\t}));\n\t\t\t}\n\t\t}\n\t\tthis.inputRef.current.addEventListener(\"onKeyUp\",(e) => this.handleClick(e));\n\t}\n\tcomponentDidUpdate(prevProps,prevState) {\n\t\tif ((prevState.meals) && (prevState.meals.length === 0)) {\n\t\t\tthis.setState(() => ({\n\t\t\t\tmeals: this.props.meals,\n\t\t\t\tfilteredMeals: this.props.meals\n\t\t\t}));\n\t\t}\n\t}\n\trender() {\n\t\treturn(\n\t\t\t<React.Fragment>\n\t\t\t\t<header className={styles.searchMealHeader}>\n\t\t\t\t\t<Tag path={-1}>Go Back</Tag>\t\t\n\t\t\t\t\t<h2><ins>Search Meal</ins></h2>\n\t\t\t\t\t<Button text=\"Home\" path=\"/Home\" />\n\t\t\t\t</header>\n\t\t\t\t<input ref={this.inputRef} type=\"text\" onKeyUp={(e) => this.handleClick(e)} />\n\t\t\t\t{\n\t\t\t\t\tthis.state.filteredMeals !== undefined && this.state.filteredMeals.length !== 0 &&\n\t\t\t\t\tthis.state.filteredMeals.map((meal, i) => <PreviewCard key={i} {...meal} /> )\n\t\t\t\t}\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nconst mapStateToProps = state => {\n\treturn {meals: state.filterMealsReducer[0]};\n}\nexport default connect(\n\tmapStateToProps,\n\t{ filterName }\n)(SearchMeal)"]},"metadata":{},"sourceType":"module"}